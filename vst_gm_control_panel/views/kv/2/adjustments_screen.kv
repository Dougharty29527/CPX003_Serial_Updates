#:kivy 2.3.0

<AdjustmentsScreen>
    md_bg_color: app.theme_cls.onPrimaryColor

    TopBar:

    MDBoxLayout:
        adaptive_size: True
        pos_hint: {'top': .975, 'center_x': .5}

        StatusBar:

    MDBoxLayout:
        adaptive_height: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .55}  # Main buttons position
        spacing: dp(24)  # Original spacing
        padding: [0, dp(60), 0, dp(60)]  # Original padding

        MDBoxLayout:
            adaptive_size: True
            orientation: 'horizontal'
            spacing: dp(24)
            pos_hint: {'center_x': .5}

            # Left Column
            DefaultBtnContainer:
                spacing: dp(18)
                orientation: 'vertical'

                # Add a spacer widget to create distance from the header
                Widget:
                    size_hint_y: None
                    height: dp(30)

                # Shutdown Time button
                DefaultBtnContainer:
                    orientation: 'vertical'
                    spacing: dp(2)

                    DefaultBtn:
                        id: shutdown_time_btn
                        text: 'SHUTDOWN TIME'
                        on_press: root.open_keypad(keypad_sheet, 'shutdown_time')

                    InfoLabel:
                        text: root.shutdown_time + ' min'
                        pos_hint: {'center_x': .5, 'center_y': .5}

                # High Pressure Alarm Delay button
                DefaultBtnContainer:
                    orientation: 'vertical'
                    spacing: dp(2)

                    DefaultBtn:
                        id: high_pressure_delay_btn
                        text: app.language_handler.translate('high_pressure_delay_btn', 'HIGH PRESSURE')
                        on_press: root.open_keypad(keypad_sheet, 'high_pressure_delay')

                    InfoLabel:
                        text: root.high_pressure_delay + ' sec'
                        pos_hint: {'center_x': .5, 'center_y': .5}

                # Variable Pressure Delay button
                DefaultBtnContainer:
                    orientation: 'vertical'
                    spacing: dp(2)

                    DefaultBtn:
                        id: variable_pressure_delay_btn
                        text: app.language_handler.translate('variable_pressure_delay_btn', 'VAR PRESSURE')
                        on_press: root.open_keypad(keypad_sheet, 'variable_pressure_delay')

                    InfoLabel:
                        text: root.variable_pressure_delay + ' sec'
                        pos_hint: {'center_x': .5, 'center_y': .5}

            # Right Column
            DefaultBtnContainer:
                spacing: dp(18)  # Original spacing
                orientation: 'vertical'

                # Add a spacer widget to create distance from the header
                Widget:
                    size_hint_y: None
                    height: dp(30)

                # Vac Pump Alarm Fault Count button
                DefaultBtnContainer:
                    orientation: 'vertical'
                    spacing: dp(2)

                    DefaultBtn:
                        id: vac_pump_fault_count_btn
                        text: app.language_handler.translate('vac_pump_fault_count_btn', 'VAC FAULT')
                        on_press: root.open_keypad(keypad_sheet, 'vac_pump_fault_count')

                    InfoLabel:
                        text: root.vac_pump_fault_count
                        pos_hint: {'center_x': .5, 'center_y': .5}

                # Low Pressure Alarm Delay button
                DefaultBtnContainer:
                    orientation: 'vertical'
                    spacing: dp(2)

                    DefaultBtn:
                        id: low_pressure_delay_btn
                        text: app.language_handler.translate('low_pressure_delay_btn', 'LOW PRESSURE')
                        on_press: root.open_keypad(keypad_sheet, 'low_pressure_delay')

                    InfoLabel:
                        text: root.low_pressure_delay + ' sec'
                        pos_hint: {'center_x': .5, 'center_y': .5}

                # Zero Pressure Delay button
                DefaultBtnContainer:
                    orientation: 'vertical'
                    spacing: dp(2)

                    DefaultBtn:
                        id: zero_pressure_delay_btn
                        text: app.language_handler.translate('zero_pressure_delay_btn', 'ZERO PRESSURE')
                        on_press: root.open_keypad(keypad_sheet, 'zero_pressure_delay')

                    InfoLabel:
                        text: root.zero_pressure_delay + ' sec'
                        pos_hint: {'center_x': .5, 'center_y': .5}

        Widget:

    # Container for Default All and Back buttons
    MDBoxLayout:
        adaptive_size: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .2}
        spacing: dp(18)  # Add spacing between buttons

        DefaultBtn:
            id: default_all_btn
            text: 'DEFAULT ALL'
            on_press: root.default_all()

    MDBoxLayout:  # Back Button
        adaptive_size: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'y': .06}

        BackBtn:
            on_press: app.switch_screen('Contractor')

    FullAccessIndicator:

    StatIndicator:

    VersionIndicator:

    SideBar:

    NoDragMDBottomSheet:
        id: keypad_sheet
        size_hint: None, None
        size: dp(525), dp(372)
        background_color: app.theme_cls.surfaceColor

        MDBottomSheetDragHandleButton:
            icon: 'close'
            on_release: keypad_sheet.set_state('toggle')
            pos_hint: {'top': 1, 'right': 1}

        MDScrollView:
            do_scroll_x: False
            do_scroll_y: False

            MDBoxLayout:
                orientation: 'vertical'
                adaptive_height: True

                MDBoxLayout:
                    adaptive_height: True
                    size_hint_x: .7
                    orientation: 'vertical'
                    spacing: dp(12)
                    pos_hint: {'center_x': .5}

                    MDBoxLayout:
                        adaptive_width: True
                        size_hint_y: None
                        height: dp(75)
                        pos_hint: {'center_x': .5}
                        padding: [0, 0, 0, '28dp']

                        KeypadTextField:
                            id: input_field
                            text: root.input_string

                    KeypadBtnContainer:
                        padding: [0, dp(12), 0, 0]

                        KeypadBtn:
                            text: '1'
                            on_press: root.add_digit(1)

                        KeypadBtn:
                            text: '2'
                            on_press: root.add_digit(2)

                        KeypadBtn:
                            text: '3'
                            on_press: root.add_digit(3)

                        KeypadBtn:
                            text: '4'
                            on_press: root.add_digit(4)

                        KeypadBtn:
                            text: '5'
                            on_press: root.add_digit(5)

                    KeypadBtnContainer:

                        KeypadBtn:
                            text: '6'
                            on_press: root.add_digit(6)

                        KeypadBtn:
                            text: '7'
                            on_press: root.add_digit(7)

                        KeypadBtn:
                            text: '8'
                            on_press: root.add_digit(8)

                        KeypadBtn:
                            text: '9'
                            on_press: root.add_digit(9)

                        KeypadBtn:
                            text: '0'
                            on_press: root.add_digit(0)

                    KeypadBtnContainer:

                        ActionKeyBtn:
                            size: dp(173), dp(49)
                            icon: 'backspace'
                            text_color: app.theme_cls.tertiaryColor
                            on_press: root.backspace()

                        ActionKeyBtn:
                            size: dp(173), dp(49)
                            icon: 'check-bold'
                            text_color: app.success_color
                            on_press: root.submit()