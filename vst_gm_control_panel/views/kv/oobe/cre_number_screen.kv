#:kivy 2.3.0

<CRENumberScreen>
    md_bg_color: '#13202E'

    TopBar:

    MDBoxLayout:
        adaptive_size: True
        pos_hint: {'top': .975, 'center_x': .5}
        StatusBar:

    # Main content
    MDBoxLayout:
        adaptive_size: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .4}  # Moved down from .39 to .35
        spacing: dp(12)
        
        MDBoxLayout:
            adaptive_size: True
            orientation: 'vertical'
            spacing: dp(12)
            pos_hint: {'center_x': .5}
            
            # Title
            OOBETitleSecondaryLabel:
                id: enter_cre_number
                text: 'ENTER STATION CRE NUMBER'
                                
            # Input field
            MDBoxLayout:
                adaptive_height: True
                size_hint_x: .6
                height: dp(50)
                orientation: 'horizontal'
                pos_hint: {'center_x': .5}
                spacing: dp(10)
                padding: [0, dp(12), 0, 0]
                
                MDTextField:
                    id: cre_input
                    font_size: sp(21)
                    max_text_length: 4
                    size_hint_x: .9
                    pos_hint: {'center_x': .5, 'center_y': .5}
                    halign: 'center'
                    password: False
            
            # Spacer to push keypad down
            Widget:
                size_hint_y: .15
                
            # Keyboard Layout
            MDBoxLayout:
                orientation: 'vertical'
                adaptive_height: True
                spacing: dp(15)
                size_hint_x: 0.9
                pos_hint: {"center_x": 0.5}
            
                # Numbers Row 1 (1-6)
                KeypadBtnContainer:
                    KeypadBtn:
                        text: '1'
                        on_press: root.add_character('1')
                    KeypadBtn:
                        text: '2'
                        on_press: root.add_character('2')
                    KeypadBtn:
                        text: '3'
                        on_press: root.add_character('3')
                    KeypadBtn:
                        text: '4'
                        on_press: root.add_character('4')
                    KeypadBtn:
                        text: '5'
                        on_press: root.add_character('5')
                    KeypadBtn:
                        text: '6'
                        on_press: root.add_character('6')
                
                # Numbers Row 2 (7-0 + backspace)
                KeypadBtnContainer:
                    KeypadBtn:
                        text: '7'
                        on_press: root.add_character('7')
                    KeypadBtn:
                        text: '8'
                        on_press: root.add_character('8')
                    KeypadBtn:
                        text: '9'
                        on_press: root.add_character('9')
                    KeypadBtn:
                        text: '0'
                        on_press: root.add_character('0')
                    ActionKeyBtn:
                        icon: 'backspace'
                        size: '124dp', '49dp'  # Double width (62dp * 2)
                        text_color: app.theme_cls.tertiaryColor
                        on_press: root.delete_character()
            
            # Confirm button container
            MDBoxLayout:
                adaptive_size: True
                orientation: 'vertical'
                spacing: dp(24)
                pos_hint: {'center_x': .5}
                padding: [0, dp(20), 0, dp(60)]
                
                # Confirm button
                DefaultBtn:
                    id: confirm_btn
                    text: app.language_handler.translate('confirm_btn', 'CONFIRM')
                    width: dp(200)
                    md_bg_color: '#253849'
                    on_press: root.on_cre_entered()
    
    # Back button
    MDBoxLayout:
        adaptive_size: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .09}
        padding: [0, '27dp', 0, 0]

        BackBtn:
            on_press: root.go_back()