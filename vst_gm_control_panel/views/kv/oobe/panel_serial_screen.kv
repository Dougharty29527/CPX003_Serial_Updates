#:kivy 2.3.0

<PanelSerialScreen>
    md_bg_color: '#13202E'

    TopBar:

    MDBoxLayout:
        adaptive_size: True
        pos_hint: {'top': .975, 'center_x': .5}

        StatusBar:

    # Main content
    MDBoxLayout:
        adaptive_size: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .39}
        spacing: dp(12)
        
        MDBoxLayout:
            adaptive_size: True
            orientation: 'vertical'
            spacing: dp(12)
            pos_hint: {'center_x': .5}
            
            # Title
            OOBETitleSecondaryLabel:
                id: enter_panel_serial
                text: 'ENTER PANEL SERIAL NUMBER'

            # Input field
            MDBoxLayout:
                adaptive_height: True
                size_hint_x: .8
                height: dp(50)
                orientation: 'horizontal'
                pos_hint: {'center_x': .5}
                spacing: dp(10)
                padding: [0, dp(12), 0, 0]
                
                MDTextField:
                    id: serial_input
                    font_size: sp(21)
                    size_hint_x: .9
                    pos_hint: {'center_x': .5, 'center_y': .5}
                    halign: 'center'
                    password: False
            
            # Spacer to push keypad down
            Widget:
                size_hint_y: .05
                
            # Keyboard Layout
            MDBoxLayout:
                orientation: 'vertical'
                adaptive_height: True
                spacing: dp(15)
                size_hint_x: .9
                pos_hint: {'center_x': .5}
            
                # Numbers Row
                KeypadBtnContainer:
                    KeypadBtn:
                        text: '1'
                        on_press: root.add_character('1')
                    KeypadBtn:
                        text: '2'
                        on_press: root.add_character('2')
                    KeypadBtn:
                        text: '3'
                        on_press: root.add_character('3')
                    KeypadBtn:
                        text: '4'
                        on_press: root.add_character('4')
                    KeypadBtn:
                        text: '5'
                        on_press: root.add_character('5')
                    KeypadBtn:
                        text: '6'
                        on_press: root.add_character('6')
                    KeypadBtn:
                        text: '7'
                        on_press: root.add_character('7')
                    KeypadBtn:
                        text: '8'
                        on_press: root.add_character('8')
                    KeypadBtn:
                        text: '9'
                        on_press: root.add_character('9')
                    KeypadBtn:
                        text: '0'
                        on_press: root.add_character('0')
                
                # Hex Letters Row (A-G) with backspace
                KeypadBtnContainer:
                    KeypadBtn:
                        text: 'A'
                        on_press: root.add_character('A')
                    KeypadBtn:
                        text: 'B'
                        on_press: root.add_character('B')
                    KeypadBtn:
                        text: 'C'
                        on_press: root.add_character('C')
                    KeypadBtn:
                        text: 'D'
                        on_press: root.add_character('D')
                    KeypadBtn:
                        text: 'E'
                        on_press: root.add_character('E')
                    KeypadBtn:
                        text: 'F'
                        on_press: root.add_character('F')
                    KeypadBtn:
                        text: 'G'
                        on_press: root.add_character('G')
                    KeypadPunctuationBtn:
                        text: '-'
                        on_press: root.add_character('-')
                    ActionKeyBtn:
                        icon: 'backspace'
                        size: '124dp', '49dp'  # Width of two buttons
                        text_color: app.theme_cls.tertiaryColor
                        on_press: root.delete_character()
            
            # Confirm button container
            MDBoxLayout:
                adaptive_size: True
                orientation: 'vertical'
                spacing: dp(24)
                pos_hint: {'center_x': .5}
                padding: [0, dp(20), 0, dp(60)]
                
                # Confirm button
                DefaultBtn:
                    id: confirm_btn
                    text: 'CONFIRM'
                    width: dp(200)
                    md_bg_color: '#253849'
                    on_press: root.on_serial_entered()
    
    # Back button
    MDBoxLayout:
        adaptive_size: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .09}
        padding: [0, dp(27), 0, 0]

        BackBtn:
            on_press: root.go_back()

    StatIndicator: