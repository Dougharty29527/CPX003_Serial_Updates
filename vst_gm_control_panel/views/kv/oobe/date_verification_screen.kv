#:kivy 2.3.0

<DateVerificationScreen>
    md_bg_color: '#13202E'

    TopBar:

    MDBoxLayout:
        adaptive_size: True
        pos_hint: {'top': .975, 'center_x': .5}

        StatusBar:

    # Main content
    MDBoxLayout:
        adaptive_size: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .409}
        spacing: dp(30)
        
        MDBoxLayout:
            adaptive_size: True
            orientation: 'vertical'
            spacing: dp(12)
            pos_hint: {'center_x': .5}
            
            # Title at the top
            OOBETitleLabel:
                id: date_verification_title
                text: 'DATE VERIFICATION'

            MDBoxLayout:
                adaptive_size: True
                orientation: 'vertical'
                spacing: dp(24)
                pos_hint: {'center_x': .5}
                padding: [0, dp(20), 0, 0]
    
                # Prompt text
                OOBEDescriptionLabel:
                    id: date_verification_prompt
                    text: 'Please verify the current system date.'
                
                # Current date display
                OOBEFocusLabel:
                    id: current_date_display
                    text: root.current_date

                # Button container - moved inside the MDBoxLayout to push up
                MDBoxLayout:
                    adaptive_size: True
                    orientation: 'vertical'
                    spacing: dp(24)
                    pos_hint: {'center_x': .5}
                    padding: [0, dp(20), 0, dp(60)]  # Added bottom padding to push up from back button

                    # Verify button - centered with proper styling
                    DefaultBtn:
                        id: verify_btn
                        text: 'VERIFY'
                        on_press: root.on_verify()
                        width: dp(200)
                        md_bg_color: '#253849'
                        pos_hint: {'center_x': .5}
                        
                    # Manual Entry button - centered with proper styling
                    DefaultBtn:
                        id: manual_entry_btn
                        text: 'MANUAL ENTRY'
                        on_press: root.on_manual_entry()
                        width: dp(200)
                        md_bg_color: '#253849'
                        pos_hint: {'center_x': .5}
    
    # Back button
    MDBoxLayout:
        adaptive_size: True
        orientation: 'vertical'
        pos_hint: {'center_x': .5, 'center_y': .09}
        padding: [0, '27dp', 0, 0]

        BackBtn:
            on_press: root.go_back()
            
    # Bottom sheet with date entry keypad
    NoDragMDBottomSheet:
        id: date_keypad_sheet
        size_hint: None, None
        size: '525dp', '372dp'
        background_color: app.theme_cls.surfaceColor

        MDBottomSheetDragHandleButton:
            icon: 'close'
            on_release: date_keypad_sheet.set_state('toggle')
            pos_hint: {'top': 1, 'right': 1}

        MDScrollView:
            do_scroll_x: False
            do_scroll_y: False

            MDBoxLayout:
                orientation: 'vertical'
                adaptive_height: True

                MDBoxLayout:
                    adaptive_height: True
                    size_hint_x: .7
                    orientation: 'vertical'
                    spacing: '12dp'
                    pos_hint: {'center_x': .5}

                    MDBoxLayout:
                        adaptive_width: True
                        size_hint_y: None
                        height: '75dp'
                        pos_hint: {'center_x': .5}
                        padding: [0, 0, 0, '28dp']

                        MDButton:
                            style: 'outlined'
                            disabled: True
                            theme_width: 'Custom'
                            width: '200dp'
                            radius: '5dp'

                            MDButtonText:
                                id: date_input_field
                                text: root.date_input_string
                                font_style: 'Title'
                                role: 'large'
                                theme_disabled_color: 'Custom'
                                disabled_color: app.theme_cls.primaryColor
                                pos_hint: {'center_x': .5, 'center_y': .5}

                    KeypadBtnContainer:
                        padding: [0, '12dp', 0, 0]

                        KeypadBtn:
                            text: '1'
                            on_press: root.add_digit(1)

                        KeypadBtn:
                            text: '2'
                            on_press: root.add_digit(2)

                        KeypadBtn:
                            text: '3'
                            on_press: root.add_digit(3)

                        KeypadBtn:
                            text: '4'
                            on_press: root.add_digit(4)

                        KeypadBtn:
                            text: '5'
                            on_press: root.add_digit(5)

                        ActionKeyBtn:
                            icon: 'backspace'
                            size: '62dp', '49dp'
                            text_color: app.theme_cls.tertiaryColor
                            on_press: root.backspace()

                    KeypadBtnContainer:

                        KeypadBtn:
                            text: '6'
                            on_press: root.add_digit(6)

                        KeypadBtn:
                            text: '7'
                            on_press: root.add_digit(7)

                        KeypadBtn:
                            text: '8'
                            on_press: root.add_digit(8)

                        KeypadBtn:
                            text: '9'
                            on_press: root.add_digit(9)

                        KeypadBtn:
                            text: '0'
                            on_press: root.add_digit(0)

                        ActionKeyBtn:
                            icon: 'check-bold'
                            size: '62dp', '49dp'
                            text_color: app.success_color
                            on_press: root.submit()

    StatIndicator: